. comment
  . indexed addressing
.. free format coding
. empty line detection
. . comand line user filenames input

COPY START 0		. program start here
FIRST STL RETADR
LDB #LENGTH
BASE LENGTH
CLOOP +JSUB RDREC
LDA LENGTH
COMP #0
JEQ ENDFIL
+JSUB 	WRREC
.++JSUB 	WRREC
J CLOOP
ENDFIL LDA EOF
STA BUFFER
LDA #3

STA LENGTH
+JSUB WRREC
J @RETADR
. space
EOF BYTE C'EOF  +@#'
RETADR RESW 1
LENGTH RESW 1
BUFFER RESB 4096
.
.
.
RDREC CLEAR X    .. subroutine
CLEAR A
CLEAR S
+LDT #4096
RLOOP TD INPUT
JEQ RLOOP
RD INPUT
COMPR Z,A
JEQ EXIT
STCH BUFFER,X
TIXR T
JLT RLOOP
EXIT STX LENGTH
RSUB
INPUT BYTE X'F1'

.
.
.

WRREC CLEAR X	. . subroutine
LDT LENGTH
WLOOP TD OUTPUT
JEQ WLOOP
LDCH BUFFER, X
WD OUTPUT
TIXR T
JLT WLOOP
RSUB
OUTPUT BYTE X'05'
END FIRST

.. . end of this program
